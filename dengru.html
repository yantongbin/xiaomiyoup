<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link rel="stylesheet" href="css/iconfont.css">
    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="css/dengru.css">
</head>
<body>
    <div id="wrapper">
        <div id="main_wrapper">
            <div class="main">
                <div class="register_logo">
                    <p class="logo"></p>
                </div>
                <div class="caption">
                    <h1>小米账号登录</h1>
                </div>
                <div class="main_code">
                    <i class="icon code"></i>
                </div>
                <div class="main_from">
                    <form action=""  autocomplete="off", method="POST", id="form">
                        <div class="form_user">
                            <input type="text" name="user" id="user" placeholder="邮箱/手机号码/小米ID">
                        </div>
                        <div class="form_password">
                            <input type="text" name="pwd" id="pwd" placeholder="密码">
                        </div>
                        <div class="form_hint">
                            <p class="p_hint">
                                <i class="icon plaint"></i>
                                <span class="sp_st"></span>
                            </p>
                        </div>
                        <div class="form_button">
                            <button class="btn">登入</button>
                        </div>
                    </form>
                </div>
                <div class="main_hint clearfix">
                    <a href="###" class="mh_left clearfix">手机短信登录注册</a>
                    <div class="mh_right clearfix">
                        <a href="zuce.html">立即注册</a> |
                        <a href="##">忘记密码?</a>
                    </div>
                </div>
                <div class="other_login">
                    <fieldset class="prompt_line">
                        <legend>其他方式登录</legend>
                    </fieldset>
                    <div class="ic_font">
                        <a href="###" class="icf_qq">
                            <i class="iconfont icon-qq"></i>
                        </a>
                        <a href="###" class="icf_weibo">
                            <i class="iconfont icon-weibo"></i>
                        </a>
                        <a href="###" class="icf_zhifubao">
                            <i class="iconfont icon-zhifubao"></i>
                        </a>
                        <a href="###" class="icf_weixin">
                            <i class="iconfont icon-weixin"></i>
                        </a>                        
                    </div>
                </div>
            </div>    
        </div>
        <div id="footer_wrapper">
            <div class="footer">
                <ul class="footer_top clearfix">
                            <li>
                                <a href="###" class="Simplified">
                                    简体
                                    |
                                </a>
                            </li>
                            <li>
                                <a href="###" class="zh-hant">
                                    繁体
                                    |
                                </a>
                            </li>
                            <li>
                                <a href="###" class="English">
                                    英语
                                    |
                                </a>
                            </li>
                            <li>
                                <a href="###" class="question">
                                    常见问题
                                    |
                                </a>
                            </li>
                            
                </ul>
                <div class="footer_bottom">
                    <p class="adders">
                        小米公司版权所有-京ICP备10046444-
                        <a href="">
                            <span class=""></span> 京公网安备11010802020134号
                        </a>
                        -京ICP证110507号
                    </p>
                </div>
            </div>
        </div>          
    </div>
    <script src="js/dengru.js"></script>
    <script src="js/getpost.js"></script>
    <script>
        var $username , $password ,$btn, $icon, $span, $input_user, $input_pwd;
        // $username = document.querySelector('#user');
        // $password = document.querySelector('#pwd');  
        var $form = document.querySelector('#form');
        $inputUser = document.querySelector('#form #user');
        $inputPwd = document.querySelector('#form #pwd');
        $btn = document.querySelector('.btn');
        $span = document.querySelector('.p_hint span');
        $icon = document.querySelector('.p_hint .plaint');
        $btn.onclick = function(e){
            e = e || window.event;
            e.preventDefault();
            sendAjax('php/dengru.php',{
                method:'post',
                data: {
                    username: $form['user'].value,
                    password: $form['pwd'].value
                },
                success(data){
                    let {code , msg , data:_data} = JSON.parse(data);
                    if(code == 200){
                        alert(1111);
                    }else{
                        if($inputUser.value ==='' || $inputPwd.value === ''){
                            dengru.init();        
                        }else if($inputUser.value.length > 0 && $inputPwd.value.length > 0){
                            $inputUser.oninput = function(){
                                $icon.style.display = 'none'
                                $span.innerHTML =`<span class="sp_st"></span>`
                            }   
                            $inputPwd.oninput = function(){
                                $icon.style.display = 'none'
                                $span.innerHTML =`<span class="sp_st"></span>`
                            }   
                            $icon.style.display = 'inline-block';
                            $span.innerHTML =`<span class="sp_st">用户名或密码错误</span>`
                        }
                    }
                }
            })
        }
    </script>
</body>
</html>